<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>感谢您的加入</title>
    <link rel="stylesheet" href="./Takeaway_login.css">
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.js"></script>


</head>

<body>
<div class="window">
    <h1>欢迎您加入我们</h1>
    <input type="text" placeholder="请输入用户名" id="username1" value=""><br>
    <input type="password" placeholder="请输入密码" id="password1" value=""><br>
    <p id="window_p">没有账号？点击注册</p>
    <button id="reg">注册</button>
    <br>
    <button id="window_btn">登录</button>


</div>
</body>

</html>
<script>
    let Merchants = null
    const getUser = () => {
        return [$("#username1").val().toString(), $("#password1").val().toString()]
    }
    $("#window_btn").click(function () {
        const merchants = {
            userName: getUser()[0],
            password: getUser()[1]
        }
        console.log(merchants)
        $.ajax({
            url: "/login/M",
            type: "POST",
            contentType: "application/json;charset=utf-8", // 请求体的类型，指定为 JSON
            data: JSON.stringify(merchants), // 将要发送的数据转换成 JSON 格式
            success: function (result) {
                if (result.flag) {
                    console.log(result)
                    Merchants = result.data
                    alert("即将跳转，请稍后...")
                    let timer = setTimeout(function () {
                        window.open("http://localhost:8080/static/pages/dingcan/Details/Takeaway_commodity.html", '_self')
                        clearTimeout(timer)
                    }, 1500)
                }else {
                    alert(result.msg)
                }

            },
            error: function (error) {
                console.log(error);
            }
        });
    })

    // $("#reg").click(function () {
    //     window.open('http://localhost/static/pages/dingcan/Login/Takeaway_login.html')
    // })
    // $("#window_btn2").click(function () {
    //     // 发送AJAX请求获取数据
    //     $.ajax({
    //         url: "http://localhost/user/search/"+$('#tab_search').val().trim(),
    //         dataType: "json",
    //         data: {
    //             term: request.term
    //         },
    //         success: function(data) {
    //             // 处理返回的数据
    //             response(data);
    //         }
    //     });
    // })
    // $("#test").click(function () {
    //     $.ajax({
    //         url: "http://localhost/user/searchFood/1",
    //         dataType: "json",
    //         success: function(data) {
    //             // 处理返回的数据
    //             console.log(data)
    //         }
    //     });
    // })
</script>